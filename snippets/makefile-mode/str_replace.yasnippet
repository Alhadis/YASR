# -*- mode: snippet -*-
# key: str_replace
# name: String replacement function
# atom-selector: .source.makefile
# --
# Replace all occurrences of \$2 with \$3 in the string "\$1"
str_replace = \$(str_replace__fn); str_replace
str_replace__fn = \\
	str_replace(){ \\
		while [ ! "\$\${1\\#*"\$\$2"}" = "\$\$1" ]; do \\
			set -- "\$\$1" "\$\$2" "\$\$3" "\$\${1%%"\$\$2"*}" "\$\${1\\#*"\$\$2"}"; \\
			set -- "\$\${4}\$\$3\$\${5}" "\$\$2" "\$\$3"; \\
		done; \\
		printf %s "\$\$1"; \\
	}
$0